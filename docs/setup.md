# WP2 Update Plugin Setup

## Installation
1. Download the plugin ZIP file.
2. Navigate to the WordPress admin dashboard.
3. Go to Plugins > Add New > Upload Plugin.
4. Select the ZIP file and click Install Now.
5. Activate the plugin.

## Configuration
1. Define a persistent encryption key (recommended in `wp-config.php`):
   ```php
   define( 'WP2_UPDATE_ENCRYPTION_KEY', 'change-me-to-a-long-random-string' );
   ```
2. Navigate to `WP2 Updates` in the WordPress admin menu.
3. Click the **Connect to GitHub** button.
4. Follow the on-screen instructions to authorize the creation of a GitHub App.
5. Once redirected back to WordPress, the connection will be automatically validated.

## Usage
- **Sync Packages**: Fetch the latest packages and their releases.
- **Manage Updates**: Select a version and update or rollback packages.
- **Webhooks**: Automatically clear update transients on GitHub push events.

## GitHub App Manifest Reference
When GitHub prompts for a manifest during the connection flow, ensure the JSON includes the exact callback endpoints generated by WordPress. A typical manifest looks like:

```json
{
  "name": "Your Site Updater",
  "url": "https://your-site.com",
  "public": false,
  "callback_urls": [
    "https://your-site.com"
  ],
  "redirect_url": "https://your-site.com/wp-admin/admin.php?page=wp2-update-github-callback",
  "setup_url": "https://your-site.com/wp-admin/admin.php?page=wp2-update",
  "setup_on_update": false,
  "default_permissions": {
    "contents": "read",
    "metadata": "read"
  },
  "default_events": [
    "release"
  ]
}
```

The `redirect_url` **must** be a fully qualified HTTPS URL pointing to the WP Admin callback page; GitHub rejects incomplete or relative values.
